{
  "filename": "domain.md",
  "__html": "<h2>域概述</h2>\n<h3>什么是域</h3>\n<ul>\n<li>在电商系统或者大型业务系统中都是按业务域的维度进行划分，比如交易下单系统有很十几个域:交付域，支付域，库存域，仓储域，价格域，配送等域。在应用框架层面，域的信息主要用于分类聚合，在应用系统开发中通过手动加注解的方式统一收集，在运营平台可以统一的管控，从业务域的角度去看哪些功能可以扩展定制，或者对其进行增强。</li>\n<li>每个域都会对外提供一系列的能力，我们一般称之为对外提供的服务。比如库存域提供库存查询，扣减库存等服务。每次交易过程可能跨了N多个域完成，如果我们想知道一次交易参与其中每个域的调用顺序，或者域和域之间的依赖关系，我们也可以通过注解的方式去定义域提供的服务。域服务定义的注解可以查看源码<code>org.xujin.halo.annotation.domian.DomainService.java</code>。</li>\n</ul>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> org.xujin.halo.annotation.domian;\n\n<span class=\"hljs-keyword\">import</span> java.lang.annotation.ElementType;\n<span class=\"hljs-keyword\">import</span> java.lang.annotation.Retention;\n<span class=\"hljs-keyword\">import</span> java.lang.annotation.RetentionPolicy;\n<span class=\"hljs-keyword\">import</span> java.lang.annotation.Target;\n\n<span class=\"hljs-meta\">@Retention</span>(RetentionPolicy.RUNTIME)\n<span class=\"hljs-meta\">@Target</span>({ElementType.METHOD})\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-meta\">@interface</span> DomainService {\n\n    <span class=\"hljs-comment\">/**\n     * 当前域的唯一编码\n     * <span class=\"hljs-doctag\">@return</span>\n     */</span>\n    <span class=\"hljs-function\">String <span class=\"hljs-title\">code</span><span class=\"hljs-params\">()</span></span>;\n\n    <span class=\"hljs-comment\">/**\n     * 域服务的名称用于显示\n     * <span class=\"hljs-doctag\">@return</span>\n     */</span>\n    <span class=\"hljs-function\">String <span class=\"hljs-title\">name</span><span class=\"hljs-params\">()</span></span>;\n\n    <span class=\"hljs-comment\">/**\n     * 当前域的描述\n     * <span class=\"hljs-doctag\">@return</span>\n     */</span>\n    <span class=\"hljs-function\">String <span class=\"hljs-title\">desc</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">default</span> \"\"</span>;\n\n    <span class=\"hljs-comment\">/**\n     * 当前域服务的帮助url\n     * <span class=\"hljs-doctag\">@return</span>\n     */</span>\n    <span class=\"hljs-function\">String <span class=\"hljs-title\">helpUrl</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">default</span> \"\"</span>;\n\n    <span class=\"hljs-comment\">/**\n     *  the domain ability codes\n     * <span class=\"hljs-doctag\">@return</span>\n     */</span>\n    String[] abilityCodes() <span class=\"hljs-keyword\">default</span> <span class=\"hljs-string\">\"\"</span>;\n\n\n}\n</code></pre>\n<h3>Halo中域的设计</h3>\n<p>Halo中域描述的注解定义如下所示:\n域描述定义的注解可以查看源码org.xujin.halo.annotation.domian.Domain.java。</p>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> org.xujin.halo.annotation.domian;\n\n<span class=\"hljs-keyword\">import</span> java.lang.annotation.*;\n\n<span class=\"hljs-comment\">/**\n* 域描述注解\n* <span class=\"hljs-doctag\">@author</span> xujin\n*/</span>\n<span class=\"hljs-meta\">@Retention</span>(RetentionPolicy.RUNTIME)\n<span class=\"hljs-meta\">@Target</span>({ElementType.TYPE})\n<span class=\"hljs-meta\">@Inherited</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-meta\">@interface</span> Domain {\n\n   <span class=\"hljs-comment\">/**\n    * 当前域的唯一code\n    * <span class=\"hljs-doctag\">@return</span>\n    */</span>\n   <span class=\"hljs-function\">String <span class=\"hljs-title\">code</span><span class=\"hljs-params\">()</span></span>;\n\n   <span class=\"hljs-comment\">/**\n    * 父域的唯一code\n    * <span class=\"hljs-doctag\">@return</span>\n    */</span>\n   <span class=\"hljs-function\">String <span class=\"hljs-title\">parentCode</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">default</span> \"\"</span>;\n\n   <span class=\"hljs-comment\">/**\n    * 当前域的名称\n    * <span class=\"hljs-doctag\">@return</span>\n    */</span>\n   <span class=\"hljs-function\">String <span class=\"hljs-title\">name</span><span class=\"hljs-params\">()</span></span>;\n\n   <span class=\"hljs-comment\">/**\n    * 当前域的描述\n    * <span class=\"hljs-doctag\">@return</span>\n    */</span>\n   <span class=\"hljs-function\">String <span class=\"hljs-title\">desc</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">default</span> \"\"</span>;\n\n}\n</code></pre>\n"
}